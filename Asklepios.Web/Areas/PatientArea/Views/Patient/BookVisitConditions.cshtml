@model Asklepios.Web.Areas.PatientArea.Models.BookVisitViewModel
@{
    ViewData["Title"] = "View";
}

<h1 style="text-align:center">
    Zarezerwuj wizytę
</h1>

<form asp-action="BookVisitConditions" method="post">
    <input asp-for="HasPredefinedMedicalWorker"  value="@Model.HasPredefinedMedicalWorker" hidden/>
    <input asp-for="HasPredefinedService"   value="@Model.HasPredefinedService" hidden/>
    <input asp-for="HasPredefinedCategory"   value="@Model.HasPredefinedCategory" hidden/>
    <input asp-for="HasPredefinedLocation"   value="@Model.HasPredefinedLocation" hidden/>

    @{
        SelectList workersItems = null;
        workersItems = new SelectList(Model.GetMedicalWorkers, "Id", "FullProffesionalName");
        SelectList locationItems = null;
        locationItems = new SelectList(Model.GetLocations, "Id", "Name");
        SelectList categoriesList = null;
        categoriesList = new SelectList(Model.GetVisitCategories, "Id", "CategoryName");
        SelectList servicesList = null;
        servicesList = new SelectList(Model.GetMedicalServices, "Id", "Name");
    }
    <select class="form-control  mb-1" asp-for="SelectedLocationId" asp-items="locationItems">
        @if (Model.HasPredefinedLocation)
        {
            
        }
        else
        {
            <option value="0">Wybierz oddział</option>
        }
    </select>

    <select class="form-control  mb-1" asp-for="SelectedCategoryId" asp-items="categoriesList">
        @if (Model.HasPredefinedCategory)
        {
            
        }
        else
        {
            <option value="0">Wybierz kategorię wizyty</option>
        }

    </select>
    <select class="form-control  mb-1" asp-for="SelectedServiceId" asp-items="servicesList">
        @if (Model.HasPredefinedService)
        {
            
        }
        else
        {
            <option value="0">Wybierz typ wizyty</option>
        }

    </select>

    <select class="form-control mb-1" asp-for="SelectedMedicalWorkerId" asp-items="workersItems" >
        @if (Model.HasPredefinedMedicalWorker)
        {
            
        }
        else
        {
            <option value="0">Wybierz lekarza</option>
        }

    </select>
    <div class="d-flex flex-column my-2">
        <button type="submit" class="btn btn-secondary btn-icon-split ">
            <span class="icon text-white-50 left" style="text-align:left;float:left">
                <i class="fas fa-filter"></i>
            </span>
            <span class="text" style="float: left">Filtruj!</span>
        </button>
    </div>
</form>


@{
    List<Visit> visits = Model.FilteredVisits;
    if (visits.Count > 0)
    {
        @for (int i = 0; i < visits.Count; i++)
        {
            Visit visit = visits[i];
            <partial name="_AvailableVisit" model="visit" />
        }
    }
    else
    {
        <h3 style="text-align:center">Brak dostępnych wizyt przy założonych kryteriach...</h3>
    }
}
